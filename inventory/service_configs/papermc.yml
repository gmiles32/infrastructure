compose_schema_version: "3.8"
containers: 
  - service_name: papermc
    active: true 
    restart: unless-stopped
    container_name: papermc
    image: itzg/minecraft-server@sha256:c123ad9e300c6db2e008b37f9559a6b1a52d13423264147b09f91c5c37928d41
    tty: true
    stdin_open: true
    environment:
      - EULA=TRUE
      - TYPE=PAPER
      - MEMORY=6G
      # TreeAssist,LuckyPerms,Vault
      - SPIGET_RESOURCES=67436,28140,34315
    volumes:
      # attach the relative directory 'data' to the container's /data path
      - ./data:/data
      - ./mods:/mods
      - ./plugins:/plugins
      - /etc/timezone:/etc/timezone

  - service_name: router
    active: true
    container_name: router
    restart: unless-stopped
    image: ${MC_ROUTER_IMAGE:-itzg/mc-router@sha256:3743907d3aaa20a0c2f59f7e5b66d2cef595e128864eeb2c01862a02cd9119c5}
    depends_on:
      - name: papermc
    environment:
     # enable API
      - API_BINDING=:25564
      - DEBUG=true
      - MAPPING=mc.{{ ext_domain }}=papermc:25565
    ports:
      - 25565:25565
      # bind the API port to only loopback to avoid external exposure
      - "127.0.0.1:25564:25564"

networks: []

volumes: []