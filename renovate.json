{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": [
      "config:base"
    ],
    "dependencyDashboard": true,
    "dependencyDashboardTitle": "Renovate Dashboard",
    "labels": ["renovatebot"],
    "ansible": {
      "fileMatch": [".ya?ml$"]
    },
    "hostRules": [
      {
        "matchHost": "docker.io",
        "concurrentRequestLimit": 2
      }
    ],
    "packageRules": [
        {
          "description": "Automerge non-major updates",
          "matchUpdateTypes": ["minor", "patch"],
          "automerge": true,
          "ignoreTests": true
        },
        {
          "description": "Only perform minor and patch upgrades for db and other foundational services",
          "matchPackageNames": ["postgres","redis","typesense"],
          "matchUpdateTypes": ["minor", "patch", "digest"]
        },
        {
          "description": "Require dashboard approval for major updates",
          "matchUpdateTypes": ["major"],
          "dependencyDashboardApproval": true        
        },
        {
          "description": "General package rules",
          "recreateWhen": "never"
        }
    ]
  }
